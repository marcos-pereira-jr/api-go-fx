version: "3.5"
services:
  app:
    build: .
    expose:
      - "8080"
    network_mode: "host"
    restart: always
    deploy:
      resources:
        limits:
          cpus: "0.5"
          memory: "200MB"
  db:
    image: mongo
    network_mode: "host"
    environment:
      - MONGO_INITDB_ROOT_USERNAME=root
      - MONGO_INITDB_ROOT_PASSWORD=root    
    deploy:
      resources:
        limits:
          cpus: "0.5"
          memory: "200MB"  
  nginx:
    image: nginx
    hostname: api
    network_mode: "host"
    volumes:
      - ./scripts/nginx/:/etc/nginx/
    expose:
      - "9999"
    deploy:
      resources:
        limits:
          cpus: "0.5"
          memory: "150MB"

